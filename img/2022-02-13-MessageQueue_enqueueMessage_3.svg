<svg id="SvgjsSvg1006" width="889.890625" height="1608.4375" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"><marker id="SvgjsMarker1068" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1069" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1084" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1085" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1088" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1089" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1172" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1173" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1188" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1189" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1198" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1199" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1218" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1219" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1228" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1229" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1258" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1259" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1274" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1275" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1290" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1291" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1300" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1301" d="M0,0 L14,5 L0,10 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker></defs><rect id="svgbackgroundid" width="889.890625" height="1608.4375" fill="#ffffff"></rect><g id="SvgjsG1009" transform="translate(36.234375,25)"><path id="SvgjsPath1010" d="M 0 0L 630 0L 630 265L 0 265Z" stroke="none" fill="none"></path><g id="SvgjsG1011"><text id="SvgjsText1012" font-family="微软雅黑" text-anchor="start" font-size="18px" width="630px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="18px" weight="400" font-style="" opacity="1" y="15.75" transform="rotate(0)"><tspan id="SvgjsTspan1013" dy="22" x="0"><tspan id="SvgjsTspan1014" style="text-decoration:;"> Message prevMsg = null;</tspan></tspan><tspan id="SvgjsTspan1015" dy="22" x="0"><tspan id="SvgjsTspan1016" style="text-decoration:;"> Message msg = mMessages;</tspan></tspan><tspan id="SvgjsTspan1017" dy="22" x="0"><tspan id="SvgjsTspan1018" style="text-decoration:;"> //注释5</tspan></tspan><tspan id="SvgjsTspan1019" dy="22" x="0"><tspan id="SvgjsTspan1020" style="text-decoration:;"> if (msg != null &amp;&amp; msg.target == null) {</tspan></tspan><tspan id="SvgjsTspan1021" dy="22" x="0"><tspan id="SvgjsTspan1022" style="text-decoration:;">     // Stalled by a barrier.  Find the next asynchronous message in the queue.</tspan></tspan><tspan id="SvgjsTspan1023" dy="22" x="0"><tspan id="SvgjsTspan1024" style="text-decoration:;">     do {</tspan></tspan><tspan id="SvgjsTspan1025" dy="22" x="0"><tspan id="SvgjsTspan1026" style="text-decoration:;">           prevMsg = msg;</tspan></tspan><tspan id="SvgjsTspan1027" dy="22" x="0"><tspan id="SvgjsTspan1028" style="text-decoration:;">           msg = msg.next;</tspan></tspan><tspan id="SvgjsTspan1029" dy="22" x="0"><tspan id="SvgjsTspan1030" style="text-decoration:;">     } while (msg != null &amp;&amp; !msg.isAsynchronous());</tspan></tspan><tspan id="SvgjsTspan1031" dy="22" x="0"><tspan id="SvgjsTspan1032" style="text-decoration:;">  }</tspan></tspan></text></g></g><g id="SvgjsG1033" transform="translate(69.01215277777779,291.5555555555554)"><path id="SvgjsPath1034" d="M 0 0L 582.2222222222222 0L 582.2222222222222 38L 0 38Z" stroke="none" fill="none"></path><g id="SvgjsG1035"><text id="SvgjsText1036" font-family="微软雅黑" text-anchor="start" font-size="16px" width="583px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="-15" transform="rotate(0)"><tspan id="SvgjsTspan1037" dy="20" x="0"><tspan id="SvgjsTspan1038" style="text-decoration:;">当msg != null &amp;&amp; msg.target == null时，则链表头部有barrier，就会进入循环找到第</tspan></tspan><tspan id="SvgjsTspan1039" dy="20" x="0"><tspan id="SvgjsTspan1040" style="text-decoration:;">一个异步消息，在这个异步消息之前的同步消息都会被忽略； 如果链表头部不是</tspan></tspan><tspan id="SvgjsTspan1041" dy="20" x="0"><tspan id="SvgjsTspan1042" style="text-decoration:;">barrier则不进入此循环</tspan></tspan></text></g></g><g id="SvgjsG1043" transform="translate(247.12326388888926,446.72222222222194)"><path id="SvgjsPath1044" d="M 0 0L 100 0L 100 70L 0 70Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1045"><text id="SvgjsText1046" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="80px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="23.875" transform="rotate(0)"><tspan id="SvgjsTspan1047" dy="16" x="50"><tspan id="SvgjsTspan1048" style="text-decoration:;">消息屏障</tspan></tspan></text></g></g><g id="SvgjsG1049" transform="translate(600.1232638888891,443.22222222222194)"><path id="SvgjsPath1050" d="M 0 0L 100 0L 100 70L 0 70Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1051"><text id="SvgjsText1052" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="80px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="23.875" transform="rotate(0)"><tspan id="SvgjsTspan1053" dy="16" x="50"><tspan id="SvgjsTspan1054" style="text-decoration:;">异步消息</tspan></tspan></text></g></g><g id="SvgjsG1055" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,600.1232604980469,526.2222290039062)"><path id="SvgjsPath1056" d="M 0 243Q 9 243 9 234L 9 130.5Q 9 121.5 22 121.5Q 9 121.5 9 112.5L 9 9Q 9 0 0 0" stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1057" d="M 0 0L 101 0L 101 243L 0 243Z" stroke="none" fill="none"></path><g id="SvgjsG1058"><text id="SvgjsText1059" font-family="微软雅黑" text-anchor="start" font-size="13px" width="74px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="110.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1060" transform="translate(57.12326388888887,356.22222222222194)"><path id="SvgjsPath1061" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1062"><text id="SvgjsText1063" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1064" dy="20" x="60"><tspan id="SvgjsTspan1065" style="text-decoration:;">prevMsg</tspan></tspan></text></g></g><g id="SvgjsG1066"><path id="SvgjsPath1067" d="M117.1232638888888 397.22222222222194L117.1232638888888 421.72222222222194L117.1232638888888 421.72222222222194L117.1232638888888 447.22222222222194" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1068)"></path></g><g id="SvgjsG1070" transform="translate(77.12326388888886,450.22222222222194)"><path id="SvgjsPath1071" d="M 0 0L 96 0L 96 63L 0 63Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1072"><text id="SvgjsText1073" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="76px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="17.5" transform="rotate(0)"><tspan id="SvgjsTspan1074" dy="20" x="48"><tspan id="SvgjsTspan1075" style="text-decoration:;">null</tspan></tspan></text></g></g><g id="SvgjsG1076" transform="translate(237.12326388888928,356.22222222222194)"><path id="SvgjsPath1077" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1078"><text id="SvgjsText1079" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1080" dy="20" x="60"><tspan id="SvgjsTspan1081" style="text-decoration:;">msg</tspan></tspan></text></g></g><g id="SvgjsG1082"><path id="SvgjsPath1083" d="M297.12326388888937 397.22222222222194L297.12326388888937 421.47222222222194L297.12326388888937 421.47222222222194L297.12326388888937 443.1222222222219" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1084)"></path></g><g id="SvgjsG1086"><path id="SvgjsPath1087" d="M391.12326388888937 513.2222222222217L471.12326388888914 513.2222222222217L471.12326388888914 513.2222222222217L551.1232638888891 513.2222222222217" stroke-dasharray="8,5" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1088)"></path><rect id="SvgjsRect1090" width="26" height="19" x="458.12326388888926" y="503.7222222222216" fill="#ffffff"></rect><text id="SvgjsText1091" font-family="微软雅黑" text-anchor="middle" font-size="15px" width="26px" fill="#323232" font-weight="400" align="top" lineHeight="19px" anchor="middle" family="微软雅黑" size="15px" weight="400" font-style="" opacity="1" y="500.8472222222216" transform="rotate(0)"><tspan id="SvgjsTspan1092" dy="18" x="471.12326388888926"><tspan id="SvgjsTspan1093" style="text-decoration:;">next</tspan></tspan></text></g><g id="SvgjsG1094" transform="translate(366.40104166666714,461.72222222222194)"><path id="SvgjsPath1095" d="M 0 0L 210 0L 210 51.5L 0 51.5Z" stroke="none" fill="none"></path><g id="SvgjsG1096"><text id="SvgjsText1097" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="210px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="11.75" transform="rotate(0)"><tspan id="SvgjsTspan1098" dy="20" x="105"><tspan id="SvgjsTspan1099" style="text-decoration:;">中间全部的同步消息全部丢弃</tspan></tspan></text></g></g><g id="SvgjsG1100" transform="translate(36.23437500000001,554.666666666667)"><path id="SvgjsPath1101" d="M 0 0L 753.7777777777777 0L 753.7777777777777 478.8888888888887L 0 478.8888888888887Z" stroke="none" fill="none"></path><g id="SvgjsG1102"><text id="SvgjsText1103" font-family="微软雅黑" text-anchor="start" font-size="16px" width="754px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="5.444444444444343" transform="rotate(0)"><tspan id="SvgjsTspan1104" dy="20" x="0"><tspan id="SvgjsTspan1105" style="text-decoration:;">         if (msg != null) {</tspan></tspan><tspan id="SvgjsTspan1106" dy="20" x="0"><tspan id="SvgjsTspan1107" style="text-decoration:;">                    if (now &lt; msg.when) {</tspan></tspan><tspan id="SvgjsTspan1108" dy="20" x="0"><tspan id="SvgjsTspan1109" style="text-decoration:;">                        // Next message is not ready.  Set a timeout to wake up when it is ready.</tspan></tspan><tspan id="SvgjsTspan1110" dy="20" x="0"><tspan id="SvgjsTspan1111" style="text-decoration:;">                        nextPollTimeoutMillis = (int) Math.min(msg.when - now, Integer.MAX_VALUE);</tspan></tspan><tspan id="SvgjsTspan1112" dy="20" x="0"><tspan id="SvgjsTspan1113" style="text-decoration:;">                    } else {</tspan></tspan><tspan id="SvgjsTspan1114" dy="20" x="0"><tspan id="SvgjsTspan1115" style="text-decoration:;">                        // Got a message. 表示当前没有阻塞</tspan></tspan><tspan id="SvgjsTspan1116" dy="20" x="0"><tspan id="SvgjsTspan1117" style="text-decoration:;">                        mBlocked = false;</tspan></tspan><tspan id="SvgjsTspan1118" dy="20" x="0"><tspan id="SvgjsTspan1119" style="text-decoration:;">                        //如果prevMsg不为空，表示有消息屏障，</tspan></tspan><tspan id="SvgjsTspan1120" dy="20" x="0"><tspan id="SvgjsTspan1121" style="text-decoration:;">                        if (prevMsg != null) {</tspan></tspan><tspan id="SvgjsTspan1122" dy="20" x="0"><tspan id="SvgjsTspan1123" style="text-decoration:;">                            //异步消息要取出，让prevMsg的next指向msg的next</tspan></tspan><tspan id="SvgjsTspan1124" dy="20" x="0"><tspan id="SvgjsTspan1125" style="text-decoration:;">                            prevMsg.next = msg.next;</tspan></tspan><tspan id="SvgjsTspan1126" dy="20" x="0"><tspan id="SvgjsTspan1127" style="text-decoration:;">                        } else {</tspan></tspan><tspan id="SvgjsTspan1128" dy="20" x="0"><tspan id="SvgjsTspan1129" style="text-decoration:;">                            //prevMsg为空，表示没有消息屏障，更新mMessages指向mgs的next</tspan></tspan><tspan id="SvgjsTspan1130" dy="20" x="0"><tspan id="SvgjsTspan1131" style="text-decoration:;">                            mMessages = msg.next;</tspan></tspan><tspan id="SvgjsTspan1132" dy="20" x="0"><tspan id="SvgjsTspan1133" style="text-decoration:;">                        }</tspan></tspan><tspan id="SvgjsTspan1134" dy="20" x="0"><tspan id="SvgjsTspan1135" style="text-decoration:;">                        //取出消息，并断开在链表中的指向</tspan></tspan><tspan id="SvgjsTspan1136" dy="20" x="0"><tspan id="SvgjsTspan1137" style="text-decoration:;">                        msg.next = null;</tspan></tspan><tspan id="SvgjsTspan1138" dy="20" x="0"><tspan id="SvgjsTspan1139" style="text-decoration:;">                        //把这个消息标记为使用状态</tspan></tspan><tspan id="SvgjsTspan1140" dy="20" x="0"><tspan id="SvgjsTspan1141" style="text-decoration:;">                        msg.markInUse();</tspan></tspan><tspan id="SvgjsTspan1142" dy="20" x="0"><tspan id="SvgjsTspan1143" style="text-decoration:;">                        //返回消息到Looper处理</tspan></tspan><tspan id="SvgjsTspan1144" dy="20" x="0"><tspan id="SvgjsTspan1145" style="text-decoration:;">                        return msg;</tspan></tspan><tspan id="SvgjsTspan1146" dy="20" x="0"><tspan id="SvgjsTspan1147" style="text-decoration:;">                    }</tspan></tspan><tspan id="SvgjsTspan1148" dy="20" x="0"><tspan id="SvgjsTspan1149" style="text-decoration:;">                }</tspan></tspan></text></g></g><g id="SvgjsG1150" transform="translate(25.01215277777778,1043.5555555555554)"><path id="SvgjsPath1151" d="M 0 0L 105.55555555555557 0L 105.55555555555557 45.55555555555566L 0 45.55555555555566Z" stroke="none" fill="none"></path><g id="SvgjsG1152"><text id="SvgjsText1153" font-family="微软雅黑" text-anchor="start" font-size="21px" width="106px" fill="#323232" font-weight="700" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="21px" weight="700" font-style="" opacity="1" y="-9.347222222222172" transform="rotate(0)"><tspan id="SvgjsTspan1154" dy="26" x="0"><tspan id="SvgjsTspan1155" style="text-decoration:;">情况1：</tspan></tspan><tspan id="SvgjsTspan1156" dy="26" x="0"><tspan id="SvgjsTspan1157" style="text-decoration:;">           </tspan></tspan></text></g></g><g id="SvgjsG1158" transform="translate(43.90104166666667,1071.5000000000007)"><path id="SvgjsPath1159" d="M 0 0L 815.3333333333334 0L 815.3333333333334 40.94444444444366L 0 40.94444444444366Z" stroke="none" fill="none"></path><g id="SvgjsG1160"><text id="SvgjsText1161" font-family="微软雅黑" text-anchor="start" font-size="16px" width="816px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6.472222222221831" transform="rotate(0)"><tspan id="SvgjsTspan1162" dy="20" x="0"><tspan id="SvgjsTspan1163" style="text-decoration:;">如果prevMsg不为空的情况下，则表示有消息屏障(就是msg)，异步消息要取出，让prevMsg的next指向msg的next</tspan></tspan></text></g></g><g id="SvgjsG1164" transform="translate(69.01215277777779,1115.222222222222)"><path id="SvgjsPath1165" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1166"><text id="SvgjsText1167" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1168" dy="20" x="60"><tspan id="SvgjsTspan1169" style="text-decoration:;">prevMsg</tspan></tspan></text></g></g><g id="SvgjsG1170"><path id="SvgjsPath1171" d="M129.01215277777771 1156.222222222222L129.01215277777771 1180.722222222222L129.01215277777771 1180.722222222222L129.01215277777771 1206.222222222222" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1172)"></path></g><g id="SvgjsG1174" transform="translate(89.01215277777777,1209.222222222222)"><path id="SvgjsPath1175" d="M 0 0L 96 0L 96 63L 0 63Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1176"><text id="SvgjsText1177" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="76px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="17.5" transform="rotate(0)"><tspan id="SvgjsTspan1178" dy="20" x="48"><tspan id="SvgjsTspan1179" style="text-decoration:;">msg(n)</tspan></tspan></text></g></g><g id="SvgjsG1180" transform="translate(247.12326388888926,1115.222222222222)"><path id="SvgjsPath1181" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1182"><text id="SvgjsText1183" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1184" dy="20" x="60"><tspan id="SvgjsTspan1185" style="text-decoration:;">msg</tspan></tspan></text></g></g><g id="SvgjsG1186"><path id="SvgjsPath1187" d="M307.1232638888892 1156.222222222222L307.1232638888892 1180.722222222222L307.1232638888892 1180.722222222222L307.1232638888892 1206.222222222222" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1188)"></path></g><g id="SvgjsG1190" transform="translate(267.12326388888926,1209.222222222222)"><path id="SvgjsPath1191" d="M 0 0L 96 0L 96 63L 0 63Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1192"><text id="SvgjsText1193" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="76px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="17.5" transform="rotate(0)"><tspan id="SvgjsTspan1194" dy="20" x="48"><tspan id="SvgjsTspan1195" style="text-decoration:;">msg(n+1)</tspan></tspan></text></g></g><g id="SvgjsG1196"><path id="SvgjsPath1197" d="M186.01215277777777 1240.722222222222L226.0677083333335 1240.722222222222L226.0677083333335 1240.722222222222L263.52326388888923 1240.722222222222" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1198)"></path></g><g id="SvgjsG1200" transform="translate(164.234375,1210)"><path id="SvgjsPath1201" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1202"><text id="SvgjsText1203" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1204" dy="20" x="60"><tspan id="SvgjsTspan1205" style="text-decoration:;">next</tspan></tspan></text></g></g><g id="SvgjsG1206" transform="translate(411.4010416666672,1115.222222222222)"><path id="SvgjsPath1207" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1208"><text id="SvgjsText1209" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"></text></g></g><g id="SvgjsG1210" transform="translate(431.4010416666672,1209.222222222222)"><path id="SvgjsPath1211" d="M 0 0L 96 0L 96 63L 0 63Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1212"><text id="SvgjsText1213" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="76px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="17.5" transform="rotate(0)"><tspan id="SvgjsTspan1214" dy="20" x="48"><tspan id="SvgjsTspan1215" style="text-decoration:;">msg(n+2)</tspan></tspan></text></g></g><g id="SvgjsG1216"><path id="SvgjsPath1217" d="M364.12326388888926 1240.722222222222L397.2621527777782 1240.722222222222L397.2621527777782 1240.722222222222L427.8010416666672 1240.722222222222" stroke-dasharray="3,3" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1218)"></path></g><g id="SvgjsG1220" transform="translate(335.234375,1210)"><path id="SvgjsPath1221" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1222"><text id="SvgjsText1223" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1224" dy="20" x="60"><tspan id="SvgjsTspan1225" style="text-decoration:;">next</tspan></tspan></text></g></g><g id="SvgjsG1226"><path id="SvgjsPath1227" d="M137.01215277777777 1273.222222222222L137.01215277777777 1302.222222222222L479.4010416666672 1302.222222222222L479.4010416666672 1275.8222222222219" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1228)"></path></g><g id="SvgjsG1230" transform="translate(255.12326388888926,1298.2222222222226)"><path id="SvgjsPath1231" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1232"><text id="SvgjsText1233" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1234" dy="20" x="60"><tspan id="SvgjsTspan1235" style="text-decoration:;">next</tspan></tspan></text></g></g><g id="SvgjsG1236" transform="translate(36.23437500000001,1349.5555555555554)"><path id="SvgjsPath1237" d="M 0 0L 105.55555555555557 0L 105.55555555555557 45.55555555555566L 0 45.55555555555566Z" stroke="none" fill="none"></path><g id="SvgjsG1238"><text id="SvgjsText1239" font-family="微软雅黑" text-anchor="start" font-size="21px" width="106px" fill="#323232" font-weight="700" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="21px" weight="700" font-style="" opacity="1" y="-9.347222222222172" transform="rotate(0)"><tspan id="SvgjsTspan1240" dy="26" x="0"><tspan id="SvgjsTspan1241" style="text-decoration:;">情况2：</tspan></tspan><tspan id="SvgjsTspan1242" dy="26" x="0"><tspan id="SvgjsTspan1243" style="text-decoration:;">           </tspan></tspan></text></g></g><g id="SvgjsG1244" transform="translate(49.90104166666667,1377.5000000000007)"><path id="SvgjsPath1245" d="M 0 0L 815.3333333333334 0L 815.3333333333334 40.94444444444366L 0 40.94444444444366Z" stroke="none" fill="none"></path><g id="SvgjsG1246"><text id="SvgjsText1247" font-family="微软雅黑" text-anchor="start" font-size="16px" width="816px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="start" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6.472222222221831" transform="rotate(0)"><tspan id="SvgjsTspan1248" dy="20" x="0"><tspan id="SvgjsTspan1249" style="text-decoration:;">如果prevMsg为空的情况下，则表示没有消息屏障，让msg的next成为链表头部</tspan></tspan></text></g></g><g id="SvgjsG1250" transform="translate(77.01215277777777,1426.4444444444443)"><path id="SvgjsPath1251" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1252"><text id="SvgjsText1253" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1254" dy="20" x="60"><tspan id="SvgjsTspan1255" style="text-decoration:;">prevMsg</tspan></tspan></text></g></g><g id="SvgjsG1256"><path id="SvgjsPath1257" d="M137.01215277777771 1467.4444444444443L137.01215277777771 1491.9444444444443L137.01215277777771 1491.9444444444443L137.01215277777771 1517.4444444444443" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1258)"></path></g><g id="SvgjsG1260" transform="translate(97.01215277777774,1520.4444444444443)"><path id="SvgjsPath1261" d="M 0 0L 96 0L 96 63L 0 63Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1262"><text id="SvgjsText1263" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="76px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="17.5" transform="rotate(0)"><tspan id="SvgjsTspan1264" dy="20" x="48"><tspan id="SvgjsTspan1265" style="text-decoration:;">null</tspan></tspan></text></g></g><g id="SvgjsG1266" transform="translate(243.12326388888926,1426.4444444444443)"><path id="SvgjsPath1267" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1268"><text id="SvgjsText1269" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1270" dy="20" x="60"><tspan id="SvgjsTspan1271" style="text-decoration:;">msg</tspan></tspan></text></g></g><g id="SvgjsG1272"><path id="SvgjsPath1273" d="M303.1232638888892 1467.4444444444443L303.1232638888892 1491.9444444444443L303.1232638888892 1491.9444444444443L303.1232638888892 1517.4444444444443" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1274)"></path></g><g id="SvgjsG1276" transform="translate(263.12326388888926,1520.4444444444443)"><path id="SvgjsPath1277" d="M 0 0L 96 0L 96 63L 0 63Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1278"><text id="SvgjsText1279" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="76px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="17.5" transform="rotate(0)"><tspan id="SvgjsTspan1280" dy="20" x="48"><tspan id="SvgjsTspan1281" style="text-decoration:;">msg(n)</tspan></tspan></text></g></g><g id="SvgjsG1282" transform="translate(419.4010416666672,1426.4444444444443)"><path id="SvgjsPath1283" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1284"><text id="SvgjsText1285" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1286" dy="20" x="60"><tspan id="SvgjsTspan1287" style="text-decoration:;">mMessages</tspan></tspan></text></g></g><g id="SvgjsG1288"><path id="SvgjsPath1289" d="M479.40104166666714 1467.4444444444443L479.40104166666714 1491.9444444444443L479.40104166666714 1491.9444444444443L479.40104166666714 1517.4444444444443" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1290)"></path></g><g id="SvgjsG1292" transform="translate(439.4010416666672,1520.4444444444443)"><path id="SvgjsPath1293" d="M 0 0L 96 0L 96 63L 0 63Z" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1294"><text id="SvgjsText1295" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="76px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="17.5" transform="rotate(0)"><tspan id="SvgjsTspan1296" dy="20" x="48"><tspan id="SvgjsTspan1297" style="text-decoration:;">msg(n+1)</tspan></tspan></text></g></g><g id="SvgjsG1298"><path id="SvgjsPath1299" d="M360.12326388888926 1551.9444444444443L399.2621527777782 1551.9444444444443L399.2621527777782 1551.9444444444443L435.8010416666672 1551.9444444444443" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1300)"></path></g><g id="SvgjsG1302" transform="translate(335.234375,1520.4444444444443)"><path id="SvgjsPath1303" d="M 0 0L 120 0L 120 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1304"><text id="SvgjsText1305" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1306" dy="20" x="60"><tspan id="SvgjsTspan1307" style="text-decoration:;">next</tspan></tspan></text></g></g></svg>